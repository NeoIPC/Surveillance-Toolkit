# NeoIPC Surveillance Reports
# Copyright (C) 2025 Charité – Universitätsmedizin Berlin
# This file is distributed under the same license as the NeoIPC Surveillance Toolkit package.
# Brar Piening <brar.piening@charite.de>, 2025.
#
msgid ""
msgstr ""
"Project-Id-Version: NeoIPC Surveillance Toolkit 0.9\n"
"Report-Msgid-Bugs-To: NeoIPC-Support@charite.de\n"
"POT-Creation-Date: 2025-10-24 22:45+0200\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: en\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Yaml Front Matter Hash Value: title
#: reports/Partner Certificate/Partner Certificate.qmd:1
#, no-wrap
msgid "NeoIPC Surveillance Partner Certificate"
msgstr ""

#. type: Fenced code block ({r})
#: reports/Partner Certificate/Partner Certificate.qmd:36
#, no-wrap
msgid ""
"\n"
"# Initialize our report data from the data file if one is provided\n"
"if (!is.null(params$dataFilePath) && file.exists(params$dataFilePath)) {\n"
"  data <- jsonlite::fromJSON(params$dataFilePath)\n"
"} else {\n"
"  data <- list()\n"
"}\n"
"\n"
"# Add report data values from parameters potentially overriding values from the\n"
"# data file\n"
"if (!is.null(params$startYear)) data$startYear <- params$startYear\n"
"if (!is.null(params$endYear)) data$endYear <- params$endYear\n"
"if (!is.null(params$hospitalName)) data$hospitalName <- params$hospitalName\n"
"if (!is.null(params$nPatients)) data$nPatients <- params$nPatients\n"
"if (!is.null(params$signatureImagePath)) data$signatureImagePath <- params$signatureImagePath\n"
"if (!is.null(params$signatory)) data$signatory <- params$signatory\n"
"if (!is.null(params$departmentCode)) data$departmentCode <- params$departmentCode\n"
"\n"
"# Abort if we don't have a signatory\n"
"if (is.null(data$signatory)) stop(\"You have to provide a signatory\")\n"
"\n"
"# Abort if we don't have a signature image path\n"
"if (is.null(data$signatureImagePath)) stop(\"You have to provide a signatureImagePath\")\n"
"\n"
"# if we are missing any essential information we try fetch it directly from the\n"
"# NeoIPC Surveillance Platform\n"
"if (is.null(data$startYear) || is.null(data$endYear) || is.null(data$hospitalName) || is.null(data$nPatients)) {\n"
"  if(is.null(data$departmentCode)) stop(\"There was insufficient data to generate a partner certificate.\\nIf you don't have all the information please provide a department code so that the system can acquire the information from the NeoIPC Surveillance Platform.\")\n"
"\n"
"  # Initialize our query dates to startYear and/or endYear or NULL\n"
"  if (is.null(data$startYear))\n"
"    startFrom <- NULL\n"
"  else\n"
"    startFrom <- as.Date(paste0(data$startYear,'-01-01'))\n"
"  if (is.null(data$endYear))\n"
"    endTo <- NULL\n"
"  else\n"
"    endTo <- as.Date(paste0(data$endYear,'-12-31'))\n"
"\n"
"  # Import date from our DHIS2 server\n"
"  ds <- suppressWarnings(neoipcr::import_dhis2(\n"
"    connection_options = neoipcr::dhis2_connection_options(\n"
"      token = Sys.getenv(\"NEOIPC_DHIS2_TOKEN\")\n"
"    ),\n"
"    dataset_options = neoipcr::dhis2_dataset_options(\n"
"      surveillance_end_from = startFrom,\n"
"      surveillance_end_to = endTo,\n"
"      include_hospital = \"yes\",\n"
"      include_department = \"yes\"\n"
"      )))\n"
"\n"
"  department <- ds$metadata$departments |>\n"
"    dplyr::filter(code == data$departmentCode) |>\n"
"    dplyr::select(department_key, hospital_key)\n"
"\n"
"  if (nrow(department) < 1)\n"
"    stop(paste0(\"Could not find a department with the code '\", data$departmentCode, \"'.\"))\n"
"\n"
"  if (is.null(data$nPatients))\n"
"    data$nPatients <- ds$enrollments |>\n"
"    dplyr::semi_join(department, dplyr::join_by(department_key)) |>\n"
"    dplyr::pull(patient_key) |>\n"
"    unique() |>\n"
"    length()\n"
"\n"
"  if (is.null(data$startYear))\n"
"    data$startYear <- ds$events |>\n"
"    dplyr::semi_join(department, dplyr::join_by(department_key)) |>\n"
"    dplyr::filter(event_type_key == \"end\") |>\n"
"    dplyr::pull(occurredAt) |>\n"
"    lubridate::year() |>\n"
"    min()\n"
"\n"
"  if (is.null(data$endYear))\n"
"    data$endYear <- ds$events |>\n"
"    dplyr::semi_join(department, dplyr::join_by(department_key)) |>\n"
"    dplyr::filter(event_type_key == \"end\") |>\n"
"    dplyr::pull(occurredAt) |>\n"
"    lubridate::year() |>\n"
"    max()\n"
"\n"
"  if (is.null(data$hospitalName))\n"
"    data$hospitalName <- ds$metadata$hospitals  |>\n"
"    dplyr::semi_join(department, dplyr::join_by(hospital_key)) |>\n"
"    dplyr::pull(displayName)\n"
"\n"
"  rm(department)\n"
"  rm(ds)\n"
"}\n"
"\n"
"# Make sure numbers aren't strings\n"
"data$startYear <- as.integer(data$startYear)\n"
"data$endYear <- as.integer(data$endYear)\n"
"data$nPatients <- as.integer(data$nPatients)\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:134
#, markdown-text, no-wrap
msgid "\\selectlanguage{british}\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:136
#, markdown-text, no-wrap
msgid "\\begin{center}\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:138
#, markdown-text, no-wrap
msgid "`r if (data$startYear == data$endYear) {'In'} else {'During the period'}`\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:140 reports/Partner
#: Certificate/Partner Certificate.qmd:144 reports/Partner Certificate/Partner
#: Certificate.qmd:148 reports/Partner Certificate/Partner Certificate.qmd:152
#: reports/Partner Certificate/Partner Certificate.qmd:158
#, markdown-text, no-wrap
msgid "\\vspace*{1.25\\baselineskip}\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:142
#, markdown-text, no-wrap
msgid "\\Huge \\bfseries `r if (data$startYear == data$endYear) {data$startYear} else {paste0(data$startYear, \"-\", data$endYear)}`\\normalsize \\normalfont\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:146
#, markdown-text, no-wrap
msgid "the neonatology unit at\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:150
#, markdown-text, no-wrap
msgid "\\large \\bfseries `r data$hospitalName`\\normalsize \\normalfont\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:154
#, markdown-text, no-wrap
msgid "participated in the NeoIPC Surveillance network.\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:156
#, markdown-text, no-wrap
msgid "\\end{center}\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:160
#, markdown-text, no-wrap
msgid "By actively tracking a total of `r paste0('**', format(data$nPatients), '**')` newborns with a birth weight below 1,500 g and/or a gestational age of less than 32 weeks, the team provided valuable benchmarking data that can be used to assess and mitigate infection risks in neonatology units. We are proud and happy to have them as partners in our quest to enhance infection prevention and control in neonatology.\n"
msgstr ""

#. type: Plain text
#: reports/Partner Certificate/Partner Certificate.qmd:166
#, markdown-text, no-wrap
msgid ""
"\\vspace*{4\\baselineskip}\n"
"\\begin{textblock*}{10cm}(12cm,27cm)\n"
"`r data$signatory`\\\\\n"
"for the NeoIPC Surveillance team\\\\\n"
"\\end{textblock*}\n"
"![](`{r} data$signatureImagePath`){fig-align=\"right\"}\n"
msgstr ""
